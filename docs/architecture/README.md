# Архитектурный пакет CookaReq

Каталог `docs/architecture/` — личный рабочий набор заметок об архитектуре CookaReq. Я единственный сопровождающий, поэтому
формат ориентирован на быстрое восстановление контекста перед изменениями в коде. Первичная задача текущего круга работ —
полностью переписать архитектурное описание и сделать его компактным, но полезным, без громоздких перечней модулей.

## Структура пакета

| Файл | Роль | Текущее состояние |
| --- | --- | --- |
| [`system_context.md`](system_context.md) | Системный контекст: назначение продукта, акторы, ключевые пользовательские сценарии и жизненные циклы. | черновой каркас (ожидает наполнения) |
| [`components.md`](components.md) | Карта подсистем и слоёв, их ответственность и точки расширения. | черновой каркас (ожидает наполнения) |
| [`data_and_config.md`](data_and_config.md) | Данные, форматы хранения, конфигурации и правила миграции. | черновой каркас (ожидает наполнения) |
| [`integrations.md`](integrations.md) | Интеграции с внешними сервисами, LLM, MCP и ОС. | черновой каркас (ожидает наполнения) |
| [`non_functional.md`](non_functional.md) | Нефункциональные аспекты: эксплуатация, тестирование, расширяемость. | черновой каркас (ожидает наполнения) |

Дополнительные материалы (исходники диаграмм, временные выписки из кода) допустимо хранить рядом, но после завершения этапа
их нужно либо интегрировать в основной текст, либо удалить.

## Принципы оформления

* **Сценарии важнее файлов.** Фиксирую ключевые жизненные циклы и взаимодействия, избегаю перечисления всех модулей подряд.
* **Локальные ссылки.** Для каждого упоминаемого компонента добавляю путь к исходникам, чтобы быстро перейти к коду.
* **Минимум легаси.** Если встречаю устаревший подход, сразу помечаю задачу на пересмотр архитектуры или кода.

## План переписывания

1. [x] **Структура пакета.** Подготовить каркасы файлов и зафиксировать назначение каждого раздела (текущий шаг).
2. [ ] **Системный контекст.** Наполнить `system_context.md`: цель продукта, акторы, high-level потоки, жизненные циклы.
3. [ ] **Карта подсистем.** Наполнить `components.md`: слои, зависимости, сценарии взаимодействия.
4. [ ] **Данные и конфигурации.** Расписать `data_and_config.md`: модели, форматы, миграции.
5. [ ] **Интеграции.** Заполнить `integrations.md`: LLM, MCP, взаимодействие с ОС.
6. [ ] **Нефункциональные аспекты.** Заполнить `non_functional.md`: эксплуатация, тестирование, расширение.
7. [ ] **Финальная ревизия.** Сверить перекрёстные ссылки, перечень задач и согласованность терминов.

После завершения каждого шага проверяю, не появились ли изменения в соседних файлах, и обновляю ссылки/термины при необходимости.

## Что подготовить к следующему шагу

* Сборка списка акторов и внешних систем.
* Выписка ключевых пользовательских сценариев (GUI, CLI, агент).
* Схема жизненных циклов: запуск приложения, сессия агента, обновление хранилища требований.

Эти заметки лягут в основу системного контекста на следующем этапе.
