# Данные и конфигурация CookaReq

> Черновой каркас: перечисляет вопросы, на которые нужно ответить при описании данных и настроек.

## 1. Хранилище требований
- [ ] Описать структуру каталога `requirements/` и вспомогательных директорий.
- [ ] Зафиксировать формат RID-файлов, правила именования, версионирование.
- [ ] Уточнить механизм загрузки/сохранения (document_store, кэширование, обработка конфликтов).

## 2. Доменные модели и схемы
- [ ] Собрать список ключевых Pydantic-моделей и их поля.
- [ ] Для каждой модели указать инварианты и правила валидации.
- [ ] Описать связь моделей с UI и MCP инструментами.

## 3. Конфигурация приложения
- [ ] Перечислить источники настроек (файлы, переменные окружения, GUI).
- [ ] Определить приоритеты и правила переопределения.
- [ ] Зафиксировать чувствительные параметры (LLM ключи, пути к проекту).

## 4. Конфигурация агента и MCP
- [ ] Описать настройки LLM-клиента, режимы работы, лимиты.
- [ ] Рассказать о конфигурации MCP-сервера и инструментах.
- [ ] Сформировать таблицу зависимостей между настройками и функциональностью.

### Параметры агента

- `agent.max_consecutive_tool_errors` — ограничение на количество подряд
  неуспешных вызовов MCP-инструментов. Значение по умолчанию равно 5, что
  позволяет LLM увидеть ответ с кодом ошибки и скорректировать аргументы.
  Неположительные значения и `null` отключают отсечку, перенося контроль на
  лимит шагов (`agent.max_thought_steps`).

## 5. Управление данными и миграции
- [ ] Выписать процессы резервного копирования и восстановления.
- [ ] Описать стратегии миграции схем (изменение структуры требований, обновление конфигов).
- [ ] Собрать известные проблемы (например, ручное слияние конфликтов).

## 6. Наблюдаемость данных
- [ ] Где логируются операции с данными и конфигурацией.
- [ ] Какие проверки и валидации выполняются автоматически.
- [ ] TODO на улучшение мониторинга и диагностики.

> При наполнении раздела свериться с `integrations.md`, чтобы не дублировать описания внешних сервисов.
