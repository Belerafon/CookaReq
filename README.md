# CookaReq

CookaReq — настольное приложение на wxPython для управления требованиями,
хранящимися в отдельных JSON‑файлах. В комплект входит графический интерфейс и
командная строка для пакетных операций.

## Возможности

- хранение требований в виде независимых файлов `id.json`;
- открытие каталога и автоматическая подгрузка списка требований;
- фильтрация по меткам и полнотекстовый поиск по нескольким полям;
- создание, клонирование, редактирование и удаление требований;
- контроль версий: счётчик ревизий и дата последнего изменения;
- поддержка вложений и пользовательских меток;
- журнал ошибок, который можно скрывать или отображать;
- запоминание размера окна, выбранных колонок, сортировки и последних каталогов;
- локализация интерфейса через `gettext`.

## Графический интерфейс

Главное окно разделено на две части:

1. **Список требований** — таблица с настраиваемыми колонками. Поддерживает
   сортировку, фильтры по меткам и текстовый поиск. Из контекстного меню можно
   создавать новые требования, клонировать существующие и удалять записи.
2. **Редактор** — форма с полями модели требования. Появляется при создании или
   редактировании записи и позволяет сохранять изменения в файл.

В нижней части окна по желанию отображается консоль логов. Настройки интерфейса
и последние открытые каталоги сохраняются между запусками.

## Командная строка

CLI реализован в модуле `app.cli`. Пример запуска:

```bash
python3 -m app.cli <команда> [аргументы]
```

Доступные команды:

- `list <dir>` — выводит список требований, поддерживает `--labels`,
  `--query` и `--fields` для фильтрации.
- `add <dir> <file>` — добавляет требование из JSON‑файла.
- `edit <dir> <file>` — обновляет существующее требование данными из файла.
- `show <dir> <id>` — показывает полное содержимое требования в виде JSON.

## Формат файла требований

Каждое требование хранится в отдельном файле `<id>.json` и описывается
следующими полями:

- `id` *(int)* — уникальный идентификатор;
- `title` *(str)* — краткое название;
- `statement` *(str)* — формулировка требования;
- `type` *(str)* — один из: `requirement`, `constraint`, `interface`;
- `status` *(str)* — `draft`, `in_review`, `approved`, `baselined`, `retired`;
- `owner` *(str)* — ответственный;
- `priority` *(str)* — `low`, `medium`, `high`;
- `source` *(str)* — происхождение требования;
- `verification` *(str)* — `inspection`, `analysis`, `demonstration`, `test`;
- `acceptance` *(str, optional)* — критерий приемки;
- `conditions` *(str)* — условия;
- `trace_up` *(str)* и `trace_down` *(str)* — связи по трассировке;
- `version` *(str)* и `modified_at` *(str)* — версия и дата изменения;
- `units` *(object, optional)* — {`quantity`, `nominal`, `tolerance`};
- `labels` *(list[str])* — произвольные метки;
- `attachments` *(list[obj])* — вложения {`path`, `note`};
- `revision` *(int)* — номер ревизии (начинается с 1);
- `approved_at` *(str, optional)* — дата утверждения;
- `notes` *(str)* — дополнительные комментарии.

## Локализация

Интерфейс использует `gettext`. При наличии соответствующих `.mo`‑файлов язык
определяется автоматически по настройкам системы.

